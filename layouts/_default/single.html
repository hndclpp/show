{{ define "main" }}
<div class="single-container">
    <!-- 骨架屏容器 -->
    <div class="skeleton-container">
        {{ partial "skeleton-single.html" . }}
    </div>

    <!-- 实际内容容器 -->
    <div class="post-content" style="display: none;">
        <!-- 原有的文章内容 -->
        <article class="post">
            <!-- 文章标题 -->
            <h2>{{ .Title }}</h2>
            <!-- 文章元数据（日期、位置、标签） -->
            <div class="post-meta">
                <!-- 日期图标和日期 -->
                <span class="meta-item">
                    <a href="/timeline" class="meta-link">
                        <svg class="icon" aria-hidden="true">
                            <use xlink:href="#icon-date-single"></use>
                        </svg>
                        {{ .Date.Format "2006-01-02" }}
                    </a>
                </span>

                <!-- 位置图标和位置 -->
                {{ if .Params.location }}
                <span class="meta-item">
                    <svg class="icon" aria-hidden="true">
                        <use xlink:href="#icon-location-single"></use> <!-- 位置图标 -->
                    </svg>
                    {{ .Params.location }}
                </span>
                {{ end }}

                <!-- 标签图标和标签 -->
                {{ if .Params.tags }}
                <span class="meta-item">
                    <svg class="icon" aria-hidden="true">
                        <use xlink:href="#icon-tags-single"></use>
                    </svg>
                    {{ range .Params.tags }}
                    <a href="{{ "/tags/" | relLangURL }}{{ . | urlize }}/" class="tag">{{ . }}</a>
                    {{ end }}
                </span>
                {{ end }}
            </div>
            <!-- 文章内容 -->
            <div class="content">
                    {{ .Content }}
            </div>

<!-- 导航：上一篇和下一篇 -->
<div class="post-navigation">
    {{ if .Prev }}
    <a href="{{ .Prev.Permalink }}" class="prev-post">
        ← 上一篇: {{ .Prev.Title }}
    </a>
    {{ end }}
    {{ if .Next }}
    <a href="{{ .Next.Permalink }}" class="next-post">
        下一篇: {{ .Next.Title }} →
    </a>
    {{ end }}
</div>

        </article>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    setTimeout(function() {
        const skeletonContainer = document.querySelector('.skeleton-container');
        const postContent = document.querySelector('.post-content');
        
        if (skeletonContainer && postContent) {
            skeletonContainer.style.display = 'none';
            postContent.style.display = 'block';
        }
    }, 300);
});
</script>
{{ end }}
